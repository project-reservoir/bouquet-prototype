<!DOCTYPE html>
<html>
  <head>
    <title>Bouquet</title>
    <link href='http://fonts.googleapis.com/css?family=Lato&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="css/styles.css">
    <script type="text/javascript" src="js/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
  </head>

  <body id="page-body">
  	<section class="map-wrapper left" id="map" styles="width: 400px; height: 400px;">
  		
  	</section>
  	<ul class="data-nav">
		<li class="data-nav-li active">
			<img src="assets/nav/sensor.svg">
			<h3>Sensor</h3>
		</li>
		<li class="data-nav-li">
			<img src="assets/nav/heatmap.svg">
			<h3>Heatmap</h3>
		</li>
		<li class="data-nav-li">
			<img src="assets/nav/irrigation.svg">
			<h3>Irrigation</h3>
		</li>
		<li class="data-nav-li">
			<img src="assets/nav/settings.svg">
			<h3>Settings</h3>
		</li>
	</ul>
  	<section class="data-wrapper right">
  		
  		<div class="data-content">
  			<div class="content-wrapper">
  				<!-- total header -->
	  			<div class="data-content-header" id="all-sensor">
	  				<h2>Sensor Data Sheet</h2>
	  				<div class="content-divider"></div>
	  				<ul class="data-toggle">
		  				<li id="toggle-list"><img src="assets/list.svg"></li>
		  				<li id="toggle-grid"><img src="assets/grid.svg"></li>
	  				</ul>
	  			</div>
	  			<!-- Listing section, change to grid-view for grid section -->
	  			<div class="dandelion-data list-view" id="test" style="display: none">
	  				<ul class="list-view-header">
	  					<li class="header-sensor">Sensor</li>
	  					<li class="header-air-temp">Air Temp</li>
	  					<li class="header-soil-temp">Soil Temp<br>
		  					<span>Level 1</span>
		  					<span>Level 2</span>
		  					<span>Level 3</span>
	  					</li>
	  					<li class="header-humidity">Humidity</li>
	  					<li class="header-moisture">Moisture<br>
		  					<span>Level 1</span>
		  					<span>Level 2</span>
		  					<span>Level 3</span>
	  					</li>
	  				</ul>
	  				<ul class="dandelion-listing">
	  					<li class="dandelion-listing-item">
	  						<ul>
	  							<h3 class="sensor">Dandelion<span>#1</span></h3>
	  							<li class="air-temp">
	  								<p>17<span>&nbsp;</span></p>
	  								<h4>Air Temp</h4>
	  							</li>
	  							<li class="soil-temp multiple-list">
	  								<p>11 <span>Level 1</span></p>
	  								<p>12 <span>Level 2</span></p>
	  								<p>14 <span>Level 3</span></p>
	  								
	  								<h4>Soil Temp</h4>
	  							</li>
	  							<li class="humidity">
	  								<p>90 <span>&nbsp;</span></p>
	  								<h4>Humidity</h4>
	  							</li>
	  							<li class="moisture multiple-list">
	  								<p>63 <span>Level 1</span></p>
	  								<p>49 <span>Level 2</span></p>
	  								<p>28 <span>Level 3</span></p>
	  								
	  								<h4>Moisture</h4>
	  							</li>
	  						</ul>
	  					</li>
	  					<li class="dandelion-listing-item">
	  						<ul>
	  							<h3 class="sensor">Dandelion<span>#2</span></h3>
	  							<li class="air-temp">
	  								<p>17<span>&nbsp;</span></p>
	  								<h4>Air Temp</h4>
	  							</li>
	  							<li class="soil-temp multiple-list">
	  								<p>11 <span>Level 1</span></p>
	  								<p>12 <span>Level 2</span></p>
	  								<p>14 <span>Level 3</span></p>
	  								
	  								<h4>Soil Temp</h4>
	  							</li>
	  							<li class="humidity">
	  								<p>90 <span>&nbsp;</span></p>
	  								<h4>Humidity</h4>
	  							</li>
	  							<li class="moisture multiple-list">
	  								<p>63 <span>Level 1</span></p>
	  								<p>49 <span>Level 2</span></p>
	  								<p>28 <span>Level 3</span></p>
	  								
	  								<h4>Moisture</h4>
	  							</li>
	  						</ul>
	  					</li>
	  					<li class="dandelion-listing-item">
	  						<ul>
	  							<h3 class="sensor">Dandelion<span>#3</span></h3>
	  							<li class="air-temp">
	  								<p>17<span>&nbsp;</span></p>
	  								<h4>Air Temp</h4>
	  							</li>
	  							<li class="soil-temp multiple-list">
	  								<p>11 <span>Level 1</span></p>
	  								<p>12 <span>Level 2</span></p>
	  								<p>14 <span>Level 3</span></p>
	  								
	  								<h4>Soil Temp</h4>
	  							</li>
	  							<li class="humidity">
	  								<p>90 <span>&nbsp;</span></p>
	  								<h4>Humidity</h4>
	  							</li>
	  							<li class="moisture multiple-list">
	  								<p>63 <span>Level 1</span></p>
	  								<p>49 <span>Level 2</span></p>
	  								<p>28 <span>Level 3</span></p>
	  								
	  								<h4>Moisture</h4>
	  							</li>
	  						</ul>
	  					</li>
	  				</ul>
	  			</div>



	  			<!-- indiv header -->
	  			<div class="data-content-header" id="indiv-sensor">
	  				<h2>Sensor: Dandelion <span>#1</span></h2>
	  				<div class="content-divider"></div>
	  				<ul class="data-toggle">
		  				<li id="toggle-daily" class="active">Daily</li>
		  				<li id="toggle-weekly">Weekly</li>
		  				<li id="toggle-montly">Monthly</li>
	  				</ul>
	  			</div>
	  			<!-- individual data view -->
	  			<div class="indiv-sensor-data" style="display: block">
	  				<ul class="device-metadata">
						<h3 class="sensor">Device Metadata</h3>
						<li class="sensor-img">
							<img src="assets/sensor-thumb.png">
						</li>
						<li class="battery">
							<p>99%</p>
							<h4>Battery</h4>
						</li>
						<li class="altitude">
							<p>1.2m</p>
							<h4>Altitude</h4>
						</li>
						<li class="longtitude">
							<p>21.205874</p>
							<h4>Longitude</h4>
						</li>
						<li class="latitude">
							<p>93.827404</p>
							<h4>Latitude</h4>
						</li>
					</ul>	
					<div class="moisture-trend">
						<h3 class="sensor">Mositure Level Trend</h3>
						<h4>Measured in % overtime for each level</h4>
						<ul class="legend">
							<li><div class="legend-circle"></div><p>Level 1</p></li>
							<li><div class="legend-circle"></div><p>Level 2</p></li>
							<li><div class="legend-circle"></div><p>Level 3</p></li>
						</ul>

						<div class="moisture-table">
							<div class="table-row">
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
							</div>
							<div class="table-row">
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
							</div>
							<div class="table-row">
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
								<div class="table-cell"><div class="cell-color"></div></div>
							</div>
							
						</div>			
					</div>
					<div class="humidity-trend">
						<h3 class="sensor">Humidity Trend</h3>
						<h4>Measured in % overtime for each level</h4>
						
						<canvas id="humidity-chart"></canvas>

					</div>
					<div class="soil-temp-trend">
						<h3 class="sensor">Soil Temperature Trend</h3>
						<h4>Measured in % overtime for each level</h4>
						
						<canvas id="soil-temp-chart"></canvas>

					</div>
	  			</div>

  			</div>
  		</div>
  	</section>
  	<div class="clearfix"></div>
  </body>
  <script>
  	var map;
  	var detail;
  	var infoArray = new Array();
	  function initMap() {
        var mapDiv = document.getElementById('map');
        map = new google.maps.Map(mapDiv, {
          center: {lat: 36.8689, lng: -119.7044},
          zoom: 16
        });

        var script = document.createElement('script');
        script.src = 'map-1.geojson';
        document.getElementsByTagName('head')[0].appendChild(script);
      }


	  // Loop through the results array and place a marker for each set of coordinates.
      window.eqfeed_callback = function(results) {
        for (var i = 0; i < results.features.length; i++) {
          var coords = results.features[i].geometry.coordinates;
          var latLng = new google.maps.LatLng(coords[1],coords[0]);
          var marker = new google.maps.Marker({
            position: latLng,
            map: map,
            title: "Marker"
          });
          popup = "Dandelion " + i;
          attachMessage(marker, popup);

	        //Add additional data
	        var dTitle = results.features[i].properties.title;
	  		var dId = results.features[i].properties.id;
	  		var dHumidity = results.features[i].properties.humidity;
	  		var dAirTemp = results.features[i].properties.airtemp;
	  		var dTemp1 = results.features[i].properties.temp1;
	  		var dTemp2 = results.features[i].properties.temp2;
	  		var dTemp3 = results.features[i].properties.temp3;
	  		var dMois1 = results.features[i].properties.mois1;
	  		var dMois2 = results.features[i].properties.mois2;
	  		var dMois3 = results.features[i].properties.mois3;
	  		var dType = results.features[i].properties.type;
	  		var dBattery = results.features[i].properties.battery;

	  		detail = [dTitle, dId, dHumidity, dAirTemp, dTemp1, dTemp2, dTemp3, dMois1, dMois2, dMois3, dType, dBattery];
			infoArray.push(detail);
        }
	      for (var j = 0; j < infoArray.length; j++) {
	      	var list = document.getElementById('test');
	      	var item = document.createElement('li');
	      	item.appendChild(document.createTextNode(infoArray[j]));
	      	list.appendChild(item);
	      }
      }

		function attachMessage(marker, info) {
		  var infowindow = new google.maps.InfoWindow({
		    content: info
		  });

		  marker.addListener('click', function() {
		    infowindow.open(marker.get('map'), marker);

		  });
		}

	</script>
	<script>
		var humidityData = {
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [
                {
                    label: "Humidity Data",
                    fillColor: "rgba(220,220,220,0.5)",
                    data: [65, 59, 80, 81, 56, 55, 40],
                    barValueSpacing : 5,
                }
            ]
        };

        var data = {
		    labels: ["January", "February", "March", "April", "May", "June", "July"],
		    datasets: [
		        {
		            label: "My First dataset",
		            fillColor: "rgba(220,220,220,0.2)",
		            strokeColor: "rgba(220,220,220,1)",
		            pointColor: "rgba(220,220,220,1)",
		            pointStrokeColor: "#fff",
		            pointHighlightFill: "#fff",
		            pointHighlightStroke: "rgba(220,220,220,1)",
		            data: [65, 59, 80, 81, 56, 55, 40]
		        },
		        {
		            label: "My Second dataset",
		            fillColor: "rgba(151,187,205,0.2)",
		            strokeColor: "rgba(151,187,205,1)",
		            pointColor: "rgba(151,187,205,1)",
		            pointStrokeColor: "#fff",
		            pointHighlightFill: "#fff",
		            pointHighlightStroke: "rgba(151,187,205,1)",
		            data: [28, 48, 40, 19, 86, 27, 90]
		        }
		    ]
		};

        var humidityContext = document.getElementById('humidity-chart').getContext('2d');
        var soilTempContext = document.getElementById('soil-temp-chart').getContext('2d');

        var humidityChart = new Chart(humidityContext).Bar(humidityData);
      	var soilTempChart = new Chart(soilTempContext).Line(data);

	</script>
	<script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
        async defer></script>
</html>
